<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Groups</title>
</head>
<body>
  <h1>Groups</h1>
<!--  <table>-->
<!--      <tbody>-->
<!--      <tr th:each="group: ${groups}">-->
<!--          <td th:text="${group.id}" />-->
<!--          <td th:text="${group.description}" />-->
<!--          <td th:text="${group.deadline}" />-->

<!--          <td>-->
<!--              <table>-->
<!--                  /*@thymesVar id="task" type="com.emzio.todo_api.model.Task"*/-->
<!--                  <tr th:each="task: ${group.tasks}">-->
<!--                      <td th:text="${task.description}">description</td>-->
<!--                  </tr>-->
<!--              </table>-->
<!--          </td>-->

<!--      </tr>-->
<!--      </tbody>-->
<!--  </table>-->
<table>
    <tr>
        <th>GroupId</th>
        <th>GroupDescription</th>
        <th>Details</th>
    </tr>
    <tr th:each="group : ${groups}" th:id="'order' + ${group.id}">
        <td th:text="${group.deadline}">id</td>
        <td th:text="${group.description}">description</td>
        <td>
            <table>
                <tr>
                    <th>TaskId</th>
                    <th>TaskDescription</th>
                </tr>
                <tr th:each="task: ${group.tasks}">
                    <td th:text="${task.isDone()}">id</td>
                    <td th:text="${task.description}">description</td>
                </tr>
            </table>
        </td>
    </tr>
</table>
  <fieldset>
      <legend > Nowa grupa </legend>
      <form action="#" th:action="@{/groups}" th:object="${groupWrite}" method="post">
<!--      <form action="#" method="post" th:action="@{/projects}" th:object="${groupWrite}">-->
          <label>Opis
              <input type="text" th:field="*{description}">
          </label>
          <fieldset th:each="task, taskStat : *{tasks}">
              <legend th:text="|task  ${taskStat.index + 1}|">  </legend>
              <label>Opis
                  <input type="text" th:field="*{tasks[__${taskStat.index}__].description} ">
              </label>
              <label> Deadline
                  <input type="datetime-local" th:field="*{tasks[__${taskStat.index}__].deadline}" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}">
              </label>
              <button type="submit"> Dodaj GrupÄ™ </button>
              <button type="submit" name="addTask"> + </button>
          </fieldset>
      </form>
  </fieldset>


</body>
</html>